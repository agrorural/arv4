{"version":3,"sources":["../assets/scripts/is.js"],"names":["$","listarDocumentos","objectToSend","ajax","url","ajax_is","ajax_url","data","beforeSend","prop","button","instaSearch","find","removeClass","addClass","complete","response","success","empty","errorMessage","vMensaje","bError","append","i","length","html","id","customPostTitle","postTerm","doc_ane__nom","title","customPostContent","doc_ane__desc","content","permalink","txtKeyword","replace","RegExp","date","termPath","doc_link","upload_dir","baseurl","docPath","toLowerCase","slug","toUpperCase","hasClass","j","max_num_pages","paged","error","console","log","limpiarDocumentos","trigger","optMonth","optYear","Date","getFullYear","optPerPage","action","postType","postTax","pt","term","taxonomy","keypress","e","which","this","val","change","click","preventDefault","document","on","page","jQuery"],"mappings":"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","file":"is.js","sourcesContent":["(function($) {\n    var instaSearch = $('#insta-search');\n    var termPath = '';\n    var customPostTitle = '';\n    var customPostContent = '';\n    var isPublished = '';\n\n    var objectToSend={\n        action : 'insta_search',\n        postType  : '',\n        postTax : '',\n        postTerm  : '',\n        txtKeyword : \"\",\n        optMonth : 0,\n        optYear : (new Date()).getFullYear(),\n        optPerPage : 20,\n        max_num_pages: 0,\n        response : [],\n        bError : false,\n        vMensaje: '',\n        paged: 1\n    };\n\n    objectToSend.postType = ajax_is.pt === '1' ? 'documentos' : 'post';\n    objectToSend.postTax = ajax_is.term ? ajax_is.term.taxonomy : 'category';\n    objectToSend.postTerm = ajax_is.term ? ajax_is.term.slug : 'agro-rural';\n\n    var docPath = '/transparencia/documentos/';\n\n    function listarDocumentos(objectToSend) {\n      $.ajax({\n        url: ajax_is.ajax_url,\n        data: objectToSend,\n        beforeSend: function() {\n          $('#optMonth').prop('disabled', true);\n          $('#optYear').prop('disabled', true);\n          $('#optPerPage').prop('disabled', true);\n          $(\"#btnDocumento\").button('loading');\n          $(\"#btnLimpiar\").button('loading');\n\n          // Preloading\n          instaSearch.find('.preloaded').removeClass('hidden');\n          instaSearch.find('.hentry').addClass('hidden');\n        },\n        complete: function(response){\n          $('#optMonth').prop('disabled', false);\n          $('#optYear').prop('disabled', false);\n          $('#optPerPage').prop('disabled', false);\n          $(\"#btnDocumento\").button('reset');\n          $(\"#btnLimpiar\").button('reset');\n          \n          // Preloading\n          instaSearch.find('.preloaded').addClass('hidden');\n          instaSearch.find('.hentry').removeClass('hidden');\n        },\n         success : function (response) {\n            objectToSend = response;\n\n            instaSearch.find(\".search-result\").empty();\n            instaSearch.find(\".wp-pagenavi\").empty();\n\n            var errorMessage = objectToSend.vMensaje;\n\n            if (objectToSend.bError) {\n            objectToSend.vMensaje = '';\n\n                objectToSend.vMensaje = '<article class=\"hentry documentos hidden\">';\n                  objectToSend.vMensaje += '<div class=\"entry-container\">';\n                    objectToSend.vMensaje += '<div class=\"entry-body\">';\n                    \n \n                        objectToSend.vMensaje += '<h2 class=\"entry-title\">'; \n                          objectToSend.vMensaje += errorMessage;\n                        objectToSend.vMensaje += '</h2>';\n                        objectToSend.vMensaje += '<div class=\"entry-content\">';\n                          objectToSend.vMensaje += '<p>Intente con otros parámetros de búsqueda...</p>'; \n                        objectToSend.vMensaje += '</div>';\n\n\n                    objectToSend.vMensaje += '</div>';\n                  objectToSend.vMensaje += '</div>';\n                objectToSend.vMensaje += '</article>';\n                instaSearch.find(\".wp-pagenavi\").addClass('hidden');\n                instaSearch.find(\".search-result\").append(objectToSend.vMensaje);\n            }else{\n\n              for (var i = 0; i < objectToSend.response.length; i++){\n\n                objectToSend.response[i].html = '';\n                objectToSend.response[i].html += '<article class=\"post-' + objectToSend.response[i].id + ' status-publish hentry tipos-rde documentos hidden\">';\n                  objectToSend.response[i].html += '<div class=\"entry-container\">';\n                    objectToSend.response[i].html += '<div class=\"entry-body \">';\n                      customPostTitle = objectToSend.postTerm === 'directivas' || objectToSend.postTerm === 'pac' ? objectToSend.response[i].doc_ane__nom : customPostTitle = objectToSend.response[i].title;\n                      customPostContent= objectToSend.postTerm === 'directivas' || objectToSend.postTerm === 'pac' ? objectToSend.response[i].doc_ane__desc: customPostContent = objectToSend.response[i].content;\n\n                        objectToSend.response[i].html += '<h2 class=\"entry-title\">';\n                          objectToSend.response[i].html += '<a href=\"' + objectToSend.response[i].permalink  + '\">';\n                          objectToSend.response[i].html += objectToSend.txtKeyword.length >= 1 ? (customPostTitle.replace(new RegExp(\"(\"+ objectToSend.txtKeyword.replace(/(\\s+)/,\"(<[^>]+>)*$1(<[^>]+>)*\") +\")\", \"gi\"), \"<mark>$1</mark>\")).replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\\/mark>)/,\"$1</mark>$2<mark>$4\") : customPostTitle; \n                           objectToSend.response[i].html += '</a>';\n                        objectToSend.response[i].html += '</h2>';\n                        \n                        objectToSend.response[i].html += '<div class=\"entry-content\">';\n                          objectToSend.response[i].html += objectToSend.txtKeyword.length >= 1 ? (customPostContent.replace(new RegExp(\"(\"+ objectToSend.txtKeyword.replace(/(\\s+)/,\"(<[^>]+>)*$1(<[^>]+>)*\") +\")\", \"gi\"), \"<mark>$1</mark>\")).replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\\/mark>)/,\"$1</mark>$2<mark>$4\") : customPostContent; \n                        objectToSend.response[i].html += '</div>';\n\n\n                      objectToSend.response[i].html += '<div class=\"post-meta\">';\n                        objectToSend.response[i].html += '<div class=\"post-date\">';\n                          objectToSend.response[i].html += '<time class=\"updated\">' + objectToSend.response[i].date + '</time>';\n                        objectToSend.response[i].html += '</div>';\n                        objectToSend.response[i].html += '<div class=\"post-comments\">';\n\n                          termPath = objectToSend.postTerm === 'directivas' ? 'rde' :\n                                     objectToSend.postTerm === 'pac' ? 'rda' :\n                                     objectToSend.postTerm;\n                          \n\n                          if ( objectToSend.response[i].doc_link === 'Publicado' ) {\n                            objectToSend.response[i].html += '<a href=\"' + ajax_is.upload_dir.baseurl + docPath + termPath.toLowerCase() + '/' + objectToSend.response[i].slug.toUpperCase() + '.PDF\" target=\"_blank\"><i class=\"fa fa-file-pdf-o\"></i> Descargar</a>';\n                          }else{\n                            objectToSend.response[i].html += 'No disponible';\n                          }\n\n                        objectToSend.response[i].html += '</div>';\n                      objectToSend.response[i].html += '</div>';\n                    objectToSend.response[i].html += '</div>';\n                  objectToSend.response[i].html += '</div>';\n                objectToSend.response[i].html += '</article>';\n                \n\n                instaSearch.find(\".search-result\").append(objectToSend.response[i].html);\n\n                if (instaSearch.find(\".wp-pagenavi\").hasClass('hidden')){\n                   instaSearch.find(\".wp-pagenavi\").removeClass('hidden');\n                }\n                \n             }\n\n             for (var j = 1; j <= objectToSend.max_num_pages; j++) {\n              var html = '<a href=\"page/' + j + '\" class=\"page navi\" data-id=\"' + j + '\">' + j + '</a>';\n              \n              if(objectToSend.paged === j){\n                html = '<span class=\"current\">' + j + '</span>';\n              }\n               \n               instaSearch.find(\".wp-pagenavi\").append(html);\n             }\n\n            }\n\n             //console.log(response);\n         }, \n         error: function(error){\n          console.log('Error inesperado');\n         }\n      });\n    }\n\n    function limpiarDocumentos(objectToSend){\n        instaSearch.find('form').trigger(\"reset\");\n        objectToSend.txtKeyword  = \"\";\n        objectToSend.optMonth  = 0;\n        objectToSend.optYear  = (new Date()).getFullYear();\n        objectToSend.optPerPage  = 20;\n        objectToSend.max_num_pages = 0;\n        objectToSend.paged = 1;\n\n        listarDocumentos(objectToSend);\n    }\n\n    listarDocumentos(objectToSend);\n\n    $(\"#txtKeyword\").keypress(function (e) {\n      if(e.which === 13) {\n        objectToSend.txtKeyword = $(this).val();\n        objectToSend.paged = 1;\n\n        listarDocumentos(objectToSend);\n      }\n    });\n\n    $(\"#optMonth\").change(function () {\n        objectToSend.txtKeyword = $(\"#txtKeyword\").val();\n        objectToSend.optMonth = $(\"#optMonth\").val();\n        objectToSend.paged = 1;\n\n        listarDocumentos(objectToSend);\n    });\n\n    $(\"#optYear\").change(function () {\n        objectToSend.txtKeyword = $(\"#txtKeyword\").val();\n        objectToSend.optYear=$(\"#optYear\").val();\n        objectToSend.paged = 1;\n\n        listarDocumentos(objectToSend);\n    });\n\n    $(\"#optPerPage\").change(function () {\n        objectToSend.txtKeyword = $(\"#txtKeyword\").val();\n        objectToSend.optPerPage = $(\"#optPerPage\").val();\n        objectToSend.paged = 1; \n\n        listarDocumentos(objectToSend);\n    });\n\n    $(\"#btnDocumento\").click(function (e) {\n        e.preventDefault();\n\n        objectToSend.txtKeyword = $(\"#txtKeyword\").val();\n        objectToSend.paged = 1;\n\n        listarDocumentos(objectToSend);\n    });\n\n    $(\"#btnLimpiar\").click(function (e) {\n        e.preventDefault();\n        limpiarDocumentos(objectToSend);\n    });\n\n  $(document).on('click', '.navi', function (e) {\n    e.preventDefault();\n\n    var page = $(this).data(\"id\");\n    objectToSend.paged = page;\n    listarDocumentos(objectToSend);\n  });\n})(jQuery); // Fully reference jQuery after this point."],"sourceRoot":"assets/scripts/"}