!function(e){function a(a){e.ajax({url:ajax_is.ajax_url,data:a,beforeSend:function(){e("#optMonth").prop("disabled",!0),e("#optYear").prop("disabled",!0),e("#optPerPage").prop("disabled",!0),e("#btnDocumento").button("loading"),e("#btnLimpiar").button("loading"),r.find(".preloaded").removeClass("hidden"),r.find(".hentry").addClass("hidden")},complete:function(){e("#optMonth").prop("disabled",!1),e("#optYear").prop("disabled",!1),e("#optPerPage").prop("disabled",!1),e("#btnDocumento").button("reset"),e("#btnLimpiar").button("reset");var t=e(".hentry").html(),n=a.txtKeyword;n=n.replace(/(\s+)/,"(<[^>]+>)*$1(<[^>]+>)*");var o=new RegExp("("+n+")","gi");t=t.replace(o,"<mark>$1</mark>"),t=t.replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"),n.length>3&&e(".hentry").html(t),r.find(".preloaded").addClass("hidden"),r.find(".hentry").removeClass("hidden")},success:function(e){if(a=e,r.find(".search-result").empty(),r.find(".wp-pagenavi").empty(),a.bError){var t="";t='<article class="hentry hidden">',t+='<div class="entry-container">',t+='<div class="entry-body">',t+='<h2 class="entry-title">',t+=a.vMensaje,t+="</h2>",t+="<p>Intente con otros parámetros de búsqueda...</p>",t+="</div>",t+="</div>",t+="</article>",r.find(".wp-pagenavi").addClass("hidden"),r.find(".search-result").append(t)}else{for(var p=0;p<a.response.length;p++){var i="";i+='<article class="post-'+a.response[p].id+' status-publish hentry tipos-rde documentos hidden">',i+='<div class="entry-container">',i+='<div class="entry-body ">',o="Directivas"===a.postTerm||"PAC"===a.postTerm?a.response[p].doc_ane__nom:o=a.response[p].title,s="Directivas"===a.postTerm||"PAC"===a.postTerm?a.response[p].doc_ane__desc:s=a.response[p].content,i+='<h2 class="entry-title">',i+='<a href="'+a.response[p].permalink+'">'+o+"</a>",i+="</h2>",i+='<div class="entry-content">'+s+"</div>",i+='<div class="post-meta">',i+='<div class="post-date">',i+='<time class="updated">'+a.response[p].date+"</time>",i+="</div>",i+='<div class="post-comments">',n="Directivas"===a.postTerm?"RDE":"PAC"===a.postTerm?"RDA":a.postTerm,i+="Publicado"===a.response[p].doc_link?'<a href="'+ajax_is.upload_dir.baseurl+d+n.toLowerCase()+"/"+a.response[p].slug.toUpperCase()+'.PDF" target="_blank"><i class="fa fa-file-pdf-o"></i> Descargar</a>':"No disponible",i+="</div>",i+="</div>",i+="</div>",i+="</div>",i+="</article>",r.find(".search-result").append(i),r.find(".wp-pagenavi").hasClass("hidden")&&r.find(".wp-pagenavi").removeClass("hidden")}for(var l=1;l<=a.max_num_pages;l++){var c='<a href="page/'+l+'" class="page navi" data-id="'+l+'">'+l+"</a>";a.paged===l&&(c='<span class="current">'+l+"</span>"),r.find(".wp-pagenavi").append(c)}}console.log(e)},error:function(e){console.log("Error inesperado")}})}function t(e){r.find("form").trigger("reset"),e.txtKeyword="",e.optMonth=0,e.optYear=(new Date).getFullYear(),e.optPerPage=20,e.max_num_pages=0,e.paged=1,a(e)}var r=e("#insta-search"),n="",o="",s="",p={action:"insta_search",postType:"",postTax:"",postTerm:"",txtKeyword:"",optMonth:0,optYear:(new Date).getFullYear(),optPerPage:20,max_num_pages:0,response:[],bError:!1,vMensaje:"",paged:1};p.postType="1"===ajax_is.pt?"documentos":"post",p.postTax=ajax_is.term?ajax_is.term.taxonomy:"category",p.postTerm=ajax_is.term?ajax_is.term.name:"AGRO RURAL";var d="/transparencia/documentos/";a(p),e("#txtKeyword").keypress(function(t){13===t.which&&(p.txtKeyword=e(this).val(),p.paged=1,a(p))}),e("#optMonth").change(function(){p.txtKeyword=e("#txtKeyword").val(),p.optMonth=e("#optMonth").val(),p.paged=1,a(p)}),e("#optYear").change(function(){p.txtKeyword=e("#txtKeyword").val(),p.optYear=e("#optYear").val(),p.paged=1,a(p)}),e("#optPerPage").change(function(){p.txtKeyword=e("#txtKeyword").val(),p.optPerPage=e("#optPerPage").val(),a(p)}),e("#btnDocumento").click(function(t){t.preventDefault(),p.txtKeyword=e("#txtKeyword").val(),p.paged=1,a(p)}),e("#btnLimpiar").click(function(e){e.preventDefault(),t(p)}),e(document).on("click",".navi",function(t){t.preventDefault();var r=e(this).data("id");p.paged=r,a(p)})}(jQuery);