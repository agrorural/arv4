!function(e){function a(a){e.ajax({url:ajax_is.ajax_url,data:a,beforeSend:function(){e("#optMonth").prop("disabled",!0),e("#optYear").prop("disabled",!0),e("#optPerPage").prop("disabled",!0),e("#btnDocumento").button("loading"),e("#btnLimpiar").button("loading"),s.find(".preloaded").removeClass("hidden"),s.find(".hentry").addClass("hidden")},complete:function(a){e("#optMonth").prop("disabled",!1),e("#optYear").prop("disabled",!1),e("#optPerPage").prop("disabled",!1),e("#btnDocumento").button("reset"),e("#btnLimpiar").button("reset"),s.find(".preloaded").addClass("hidden"),s.find(".hentry").removeClass("hidden")},success:function(e){a=e,s.find(".search-result").empty(),s.find(".wp-pagenavi").empty();var t=a.vMensaje;if(a.bError)a.vMensaje="",a.vMensaje='<article class="hentry documentos hidden">',a.vMensaje+='<div class="entry-container">',a.vMensaje+='<div class="entry-body">',a.vMensaje+='<h2 class="entry-title">',a.vMensaje+=t,a.vMensaje+="</h2>",a.vMensaje+='<div class="entry-content">',a.vMensaje+="<p>Intente con otros parámetros de búsqueda...</p>",a.vMensaje+="</div>",a.vMensaje+="</div>",a.vMensaje+="</div>",a.vMensaje+="</article>",s.find(".wp-pagenavi").addClass("hidden"),s.find(".search-result").append(a.vMensaje);else{for(var p=0;p<a.response.length;p++)a.response[p].html="",a.response[p].html+='<article class="post-'+a.response[p].id+' status-publish hentry tipos-rde documentos hidden">',a.response[p].html+='<div class="entry-container">',a.response[p].html+='<div class="entry-body ">',n="directivas"===a.postTerm||"pac"===a.postTerm?a.response[p].doc_ane__nom:n=a.response[p].title,o="directivas"===a.postTerm||"pac"===a.postTerm?a.response[p].doc_ane__desc:o=a.response[p].content,a.response[p].html+='<h2 class="entry-title">',a.response[p].html+='<a href="'+a.response[p].permalink+'">',a.response[p].html+=a.txtKeyword.length>=1?n.replace(new RegExp("("+a.txtKeyword.replace(/(\s+)/,"(<[^>]+>)*$1(<[^>]+>)*")+")","gi"),"<mark>$1</mark>").replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"):n,a.response[p].html+="</a>",a.response[p].html+="</h2>",a.response[p].html+='<div class="entry-content">',a.response[p].html+=a.txtKeyword.length>=1?o.replace(new RegExp("("+a.txtKeyword.replace(/(\s+)/,"(<[^>]+>)*$1(<[^>]+>)*")+")","gi"),"<mark>$1</mark>").replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"):o,a.response[p].html+="</div>",a.response[p].html+='<div class="post-meta">',a.response[p].html+='<div class="post-date">',a.response[p].html+='<time class="updated">'+a.response[p].date+"</time>",a.response[p].html+="</div>",a.response[p].html+='<div class="post-comments">',r="directivas"===a.postTerm?"rde":"ado"===a.postTerm?"rde":"pac"===a.postTerm?"rda":"cds"===a.postTerm?"rda":a.postTerm,"Publicado"===a.response[p].doc_link?a.response[p].html+='<a href="'+ajax_is.upload_dir.baseurl+d+r.toLowerCase()+"/"+a.response[p].slug.toUpperCase()+'.PDF" target="_blank"><i class="fa fa-file-pdf-o"></i> Descargar</a>':a.response[p].html+="No disponible",a.response[p].html+="</div>",a.response[p].html+="</div>",a.response[p].html+="</div>",a.response[p].html+="</div>",a.response[p].html+="</article>",s.find(".search-result").append(a.response[p].html),s.find(".wp-pagenavi").hasClass("hidden")&&s.find(".wp-pagenavi").removeClass("hidden");for(var i=1;i<=a.max_num_pages;i++){var l='<a href="page/'+i+'" class="page navi" data-id="'+i+'">'+i+"</a>";a.paged===i&&(l='<span class="current">'+i+"</span>"),s.find(".wp-pagenavi").append(l)}}},error:function(e){console.log("Error inesperado")}})}function t(e){s.find("form").trigger("reset"),e.txtKeyword="",e.optMonth=0,e.optYear=(new Date).getFullYear(),e.optPerPage=20,e.max_num_pages=0,e.paged=1,a(e)}var s=e("#insta-search"),r="",n="",o="",p={action:"insta_search",postType:"",postTax:"",postTerm:"",txtKeyword:"",optMonth:0,optYear:(new Date).getFullYear(),optPerPage:20,max_num_pages:0,response:[],bError:!1,vMensaje:"",paged:1};p.postType="1"===ajax_is.pt?"documentos":"post",p.postTax=ajax_is.term?ajax_is.term.taxonomy:"category",p.postTerm=ajax_is.term?ajax_is.term.slug:"agro-rural";var d="/transparencia/documentos/";a(p),e("#txtKeyword").keypress(function(t){13===t.which&&(p.txtKeyword=e(this).val(),p.paged=1,a(p))}),e("#optMonth").change(function(){p.txtKeyword=e("#txtKeyword").val(),p.optMonth=e("#optMonth").val(),p.paged=1,a(p)}),e("#optYear").change(function(){p.txtKeyword=e("#txtKeyword").val(),p.optYear=e("#optYear").val(),p.paged=1,a(p)}),e("#optPerPage").change(function(){p.txtKeyword=e("#txtKeyword").val(),p.optPerPage=e("#optPerPage").val(),p.paged=1,a(p)}),e("#btnDocumento").click(function(t){t.preventDefault(),p.txtKeyword=e("#txtKeyword").val(),p.paged=1,a(p)}),e("#btnLimpiar").click(function(e){e.preventDefault(),t(p)}),e(document).on("click",".navi",function(t){t.preventDefault();var s=e(this).data("id");p.paged=s,a(p)})}(jQuery);