!function(e){function a(a){e.ajax({url:ajax_is.ajax_url,data:a,beforeSend:function(){e("#optMonth").prop("disabled",!0),e("#optYear").prop("disabled",!0),e("#optPerPage").prop("disabled",!0),e("#btnDocumento").button("loading")},complete:function(){e("#optMonth").prop("disabled",!1),e("#optYear").prop("disabled",!1),e("#optPerPage").prop("disabled",!1),e("#btnDocumento").button("reset"),e(".hentry .entry-title").removeClass("is-preloaded"),e(".hentry .entry-content").removeClass("is-preloaded"),e(".hentry .post-meta").removeClass("is-preloaded"),e(".hentry").removeClass("preloaded")},success:function(e){if(a=e,o.find(".search-result").empty(),o.find(".wp-pagenavi").empty(),a.bError){var t="";t='<article class="hentry preloaded">',t+='<div class="entry-container">',t+='<div class="entry-body">',t+='<h2 class="entry-title is-preloaded">',t+=a.vMensaje,t+="</h2>",t+="<p>Intente con otros parámetros de búsqueda...</p>",t+="</div>",t+="</div>",t+="</article>",o.find(".wp-pagenavi").addClass("hidden"),o.find(".search-result").append(t)}else{for(var p=0;p<a.response.length;p++){var d="";d+='<article class="post-'+a.response[p].id+' status-publish hentry tipos-rde documentos preloaded">',d+='<div class="entry-container">',d+='<div class="entry-body ">',r="Directivas"===a.postTerm||"PAC"===a.postTerm?a.response[p].doc_ane__nom:r=a.response[p].title,n="Directivas"===a.postTerm||"PAC"===a.postTerm?a.response[p].doc_ane__desc:n=a.response[p].content,d+='<h2 class="entry-title is-preloaded">',d+='<a href="'+a.response[p].permalink+'">'+r+"</a>",d+="</h2>",d+='<div class="entry-content is-preloaded">'+n+"</div>",d+='<div class="post-meta is-preloaded">',d+='<div class="post-date">',d+='<time class="updated">'+a.response[p].date+"</time>",d+="</div>",d+='<div class="post-comments">',s="Directivas"===a.postTerm?"RDE":"PAC"===a.postTerm?"RDA":a.postTerm,d+="Publicado"===a.response[p].doc_link?'<a href="'+ajax_is.upload_dir.baseurl+i+s.toLowerCase()+"/"+a.response[p].slug.toUpperCase()+'.PDF" target="_blank"><i class="fa fa-file-pdf-o"></i> Descargar</a>':"No disponible",d+="</div>",d+="</div>",d+="</div>",d+="</div>",d+="</article>",o.find(".search-result").append(d),o.find(".wp-pagenavi").hasClass("hidden")&&(o.find(".wp-pagenavi").removeClass("hidden"),console.log("Removio la clase hidden"))}for(var l=1;l<=a.max_num_pages;l++){var c='<a href="page/'+l+'" class="page navi" data-id="'+l+'">'+l+"</a>";a.paged===l&&(c='<span class="current">'+l+"</span>"),o.find(".wp-pagenavi").append(c)}}console.log(e)},error:function(e){console.log("Error inesperado")}})}function t(e){o.find("form").trigger("reset"),e.txtKeyword="",e.optMonth=0,e.optYear=(new Date).getFullYear(),e.optPerPage=20,e.max_num_pages=0,e.paged=1,a(e)}var o=e("#insta-search"),s="",r="",n="",p={action:"insta_search",postType:"",postTax:"",postTerm:"",txtKeyword:"",optMonth:0,optYear:(new Date).getFullYear(),optPerPage:20,max_num_pages:0,response:[],bError:!1,vMensaje:"",paged:1};p.postType="1"===ajax_is.pt?"documentos":"post",p.postTax=ajax_is.term?ajax_is.term.taxonomy:"category",p.postTerm=ajax_is.term?ajax_is.term.name:"AGRO RURAL";var i="/transparencia/documentos/";a(p),e("#txtKeyword").keyup(function(){p.txtKeyword=e("#txtKeyword").val(),a(p)}),e("#optMonth").change(function(){p.optMonth=e("#optMonth").val(),a(p)}),e("#optYear").change(function(){p.optYear=e("#optYear").val(),a(p)}),e("#optPerPage").change(function(){p.optPerPage=e("#optPerPage").val(),a(p)}),e("#btnDocumento").click(function(e){e.preventDefault(),a(p)}),e("#btnLimpiar").click(function(e){e.preventDefault(),t(p)}),e(document).on("click",".navi",function(t){t.preventDefault();var o=e(this).data("id");p.paged=o,a(p)})}(jQuery);